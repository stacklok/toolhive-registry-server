# Example configuration for reading from a local file
#
# This configuration reads registry data from a local JSON file on the filesystem.
# This is useful for:
#   - Testing and development
#   - Reading from mounted volumes (e.g., ConfigMaps mounted as files)
#   - Pre-downloaded or statically provided registry data
#
# Usage:
#   thv-registry-api serve --config examples/config-file.yaml

# Registry name/identifier (optional, defaults to "default")
registryName: toolhive

# Registries configuration (can have multiple registries)
registries:
  - name: local-file
    # Data format: toolhive (native) or upstream (MCP registry format)
    format: toolhive

    # Local file configuration
    file:
      # Path to the registry.json file (absolute or relative)
      # Can be a mounted ConfigMap, downloaded file, or any JSON file
      path: ./data/registry.json

    # Per-registry automatic synchronization policy
    syncPolicy:
      # Sync interval - how often to check if the file has changed
      # For local files, you can use shorter intervals
      interval: "5m"

    # Optional: Per-registry filter configuration to include/exclude specific servers
    # filter:
    #   # Name-based filtering
    #   names:
    #     include:
    #       - "official/*"
    #       - "stacklok/*"
    #     exclude:
    #       - "*/deprecated"
    #
    #   # Tag-based filtering
    #   tags:
    #     include:
    #       - "production"
    #       - "stable"
    #     exclude:
    #       - "experimental"

auth:
  mode: anonymous

# Optional: PostgreSQL database configuration
# Uncomment to store registry data in a database instead of local files
# Passwords are managed via PostgreSQL's pgpass file (~/.pgpass or $PGPASSFILE)
# See: https://www.postgresql.org/docs/current/libpq-pgpass.html
# database:
#   host: localhost
#   port: 5432
#   user: thv_user
#   database: toolhive_registry
#   # For development, disable SSL (NOT for production!)
#   sslMode: disable
