# Docker Compose configuration example
#
# This configuration is designed for use with docker-compose.yml
# It includes database configuration for the PostgreSQL container

# Registry name/identifier
registryName: docker-registry

# ==============================================================================
# DATA SOURCE CONFIGURATION
# ==============================================================================

source:
  # Using file source for simplicity in Docker environment
  # You can change this to git or api as needed
  type: file
  format: toolhive
  file:
    path: /data/registry.json

# ==============================================================================
# SYNCHRONIZATION POLICY
# ==============================================================================

syncPolicy:
  # Check for updates every 5 minutes
  interval: "5m"

# ==============================================================================
# DATABASE CONFIGURATION (Optional)
# ==============================================================================

database:
  # Database connection settings
  # These values match the postgres service in docker-compose.yml
  host: postgres
  port: 5432
  user: registry

  # Password Configuration (Choose ONE method):

  # Method 1: Environment variable (set in docker-compose.yml)
  # THV_DATABASE_PASSWORD=registry_password
  # This is used by default in the docker-compose setup

  # Method 2: Password from file (alternative for production)
  # Uncomment to read password from a file (e.g., Docker/Kubernetes secret)
  # passwordFile: /secrets/db/password

  database: registry
  sslMode: disable  # SSL disabled for local Docker network

  # Connection pool settings (optional)
  maxOpenConns: 25
  maxIdleConns: 5
  connMaxLifetime: "5m"

# ==============================================================================
# FILTERING (Optional)
# ==============================================================================

# Uncomment to enable filtering
# filter:
#   names:
#     include:
#       - "official/*"
#     exclude:
#       - "*/deprecated"
